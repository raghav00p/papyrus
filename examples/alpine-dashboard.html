<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alpine.js Dashboard — Odyssey Example</title>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--muted:#94a3b8;--accent:#60a5fa}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:linear-gradient(180deg,#07142a 0%, #081827 100%);color:#e6eef8}
    .wrap{max-width:1100px;margin:32px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .search{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:8px;color:inherit}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px}
    .card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .stat{font-size:22px;font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .tasks{margin-top:12px}
    .task{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:8px}
    button{background:var(--accent);border:none;color:#04263b;padding:8px 10px;border-radius:8px;cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
    .chart{display:flex;gap:8px;align-items:end;height:120px;padding:8px}
    .bar{width:28px;border-radius:6px;background:linear-gradient(180deg,var(--accent),#3b82f6);display:flex;align-items:flex-end;justify-content:center;color:#021427;font-weight:700}
    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center}
    .modal-card{background:#072033;padding:16px;border-radius:10px;width:320px}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
  </style>
</head>
<body>
  <div class="wrap" x-data="dashboard()">
    <header>
      <div>
        <h1 style="margin:0">Odyssey — Alpine Dashboard</h1>
        <div class="muted">Tiny, client-side dashboard demo (Alpine.js)</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <input class="search" placeholder="Search tasks..." x-model="search">
        <button @click="openAdd = true">New</button>
      </div>
    </header>

    <section class="grid">
      <div class="card">
        <div class="muted">Users</div>
        <div class="stat" x-text="stats.users"></div>
        <div class="muted">Active this week: <span x-text="stats.active"></span></div>
      </div>
      <div class="card">
        <div class="muted">Tasks</div>
        <div class="stat" x-text="tasks.length"></div>
        <div class="muted">Completed: <span x-text="completedCount"></span></div>
      </div>
      <div class="card">
        <div class="muted">Sessions</div>
        <div class="stat" x-text="stats.sessions"></div>
        <div class="muted">Realtime: <span x-text="stats.realtime ? 'on' : 'off'"></span></div>
      </div>
    </section>

    <section style="display:grid;grid-template-columns:2fr 1fr;gap:12px;">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong>Tasks</strong><div class="muted">Filter & quick actions</div></div>
          <div>
            <button class="btn-ghost" @click="clearCompleted">Clear Completed</button>
          </div>
        </div>
        <div class="tasks">
          <template x-for="(t,i) in filteredTasks" :key="t.id">
            <div class="task">
              <div style="display:flex;gap:10px;align-items:center">
                <input type="checkbox" x-model="t.done">
                <div>
                  <div x-text="t.title" :class="{'muted': t.done}"></div>
                  <div class="muted" x-text="t.desc"></div>
                </div>
              </div>
              <div style="display:flex;gap:8px;align-items:center">
                <div class="muted" x-text="t.priority"></div>
                <button class="btn-ghost" @click="remove(i)">Remove</button>
              </div>
            </div>
          </template>
          <div x-show="filteredTasks.length === 0" class="muted" style="padding:10px">No tasks match.</div>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div><strong>Weekly Chart</strong><div class="muted">Events by day</div></div>
          <div class="muted">Max: <span x-text="maxChart"></span></div>
        </div>
        <div class="chart" aria-hidden="true">
          <template x-for="(v,i) in chartData" :key="i">
            <div style="display:flex;flex-direction:column;align-items:center">
              <div class="bar" :style="`height:${(v/maxChart)*100}%`" x-text="v"></div>
              <div class="muted" style="font-size:12px;margin-top:6px" x-text="days[i]"></div>
            </div>
          </template>
        </div>
      </div>
    </section>

    <!-- Add modal -->
    <div x-show="openAdd" class="modal" x-cloak>
      <div class="modal-card" @click.away="openAdd=false">
        <h3 style="margin-top:0">Add Task</h3>
        <label class="muted">Title</label>
        <input x-model="form.title" placeholder="Task title">
        <label class="muted">Description</label>
        <textarea x-model="form.desc" rows="3" placeholder="Optional description"></textarea>
        <label class="muted">Priority</label>
        <select x-model="form.priority">
          <option>low</option>
          <option selected>medium</option>
          <option>high</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:10px;justify-content:flex-end">
          <button class="btn-ghost" @click="openAdd=false">Cancel</button>
          <button @click="addTask">Add</button>
        </div>
      </div>
    </div>

    <footer style="margin-top:18px;display:flex;justify-content:space-between;align-items:center;color:var(--muted)">
      <div>Built with Alpine.js — small, frictionless UI</div>
      <div class="muted">Local demo • No backend required</div>
    </footer>
  </div>

  <script>
    function dashboard(){
      return {
        search: '',
        openAdd: false,
        form: {title:'',desc:'',priority:'medium'},
        stats: {users:1244,active:87,sessions:312,realtime:true},
        days:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
        chartData:[12,34,28,45,18,9,22],
        tasks:[
          {id:1,title:'Wireframe landing',desc:'Create basic layout',priority:'high',done:false},
          {id:2,title:'Auth with PocketBase',desc:'Try local PocketBase',priority:'medium',done:false},
          {id:3,title:'Microcopy review',desc:'Edit CTA text',priority:'low',done:true}
        ],
        get maxChart(){ return Math.max(...this.chartData) },
        get completedCount(){ return this.tasks.filter(t=>t.done).length },
        get filteredTasks(){
          const q = this.search && this.search.toLowerCase();
          return this.tasks.filter(t => !q || t.title.toLowerCase().includes(q) || (t.desc || '').toLowerCase().includes(q))
        },
        remove(i){ this.tasks.splice(i,1) },
        clearCompleted(){ this.tasks = this.tasks.filter(t=>!t.done) },
        addTask(){
          if(!this.form.title.trim()) return;
          this.tasks.unshift({id:Date.now(),title:this.form.title,desc:this.form.desc,priority:this.form.priority,done:false});
          this.form.title='';this.form.desc='';this.form.priority='medium';this.openAdd=false;
        }
      }
    }
  </script>
</body>
</html>
